"0","#Set colours for graphs "
"0","vaccinetype <- c(""#002147"", ""#8B3A3A"")"
"0","contraception<- c(""#D02090"", ""#9AC0CD"", ""#458B00"", ""#436EEE"")"
"0","covidtype<-c(""#4876FF"", ""#4D4D4D"", ""#7A378B"")"
"0","reprostate<- c(""#698B69"", ""#BC8F8F"", ""#B0C4DE"", ""#FFD700"")"
"0",""
"0",""
"0",""
"0","#tokenise words"
"0","df_token <- df_clean %>% "
"0","unnest_tokens(word, trimother)"
"0",""
"0","# Lemmatize the words in new column"
"0","#Because the lemmatising dictionary doesn't have ""painful"", I'm changing all painful to pain. "
"0","fix.lemmas <- function(doc) {"
"0","  # painful to pain"
"0","  doc <- gsub(""painful"", ""pain"", doc)"
"0","  return(doc)"
"0","}"
"0",""
"0","#run that "
"0","df_token$word<-sapply(df_token$word,fix.lemmas)"
"0","#lemmatize words but omitting spotting "
"0","df_token$lemword<-lemmatize_strings(df_token$word, dictionary = lexicon::hash_lemmas[!token%in%c(""shot"", ""spotting""), ])"
"0","df_token$lemword<-as.character(df_token$lemword)"
"0",""
"0","#Create list of undesirable words"
"0","undersirablewords <- tibble(word = c(""since"",""days"",""yet"",""one"",""two"",""tell"",""soon"",""due"",""had"",""first"",""day"",""week"",""twenty"",""time"",""three"",""weeks"",""jab"",""say"",""just"",""last"",""know"",""it's"",""started"",""ago"",""got"",""five"",""months"",""thousand"",""now"",""enough"",""haven't"",""next"",""eight"",""four"",""six"",""i've"",""today"",""also"",""came"",""march"",""much"",""thirty"",""year"",""recent"",""can"",""following"",""january"",""april"",""month"",""sure"",""yesterday"",""however"",""still"",""think"",""yes"",""period"",""NA"",""around"",""vaccinated"",""vaccine"",""vaccination"",""covid"",""twond"",""perhaps"",NA,""i'm"",""cycle"",""periods"",""cycles"",""menstrual"",""february"",""pill"",""coil"",""contraceptive"",""seem"",""sunday"",""may"",""seven"",""taking"",""twelve"",""september"",""level"",""become"",""n"",""august"",""even"",""cannot"",""injection"",""ten"",""2"",""pre"",""nineteen"",""come"",""19"",""2"",""hadn ' t"",""notice"",""can't"",""though"",""fifty"",""although"",""happen"",""go"",""far"",""december"",""expect"",""etc"",""usual"",""usually"",""receive"",""onest"",""answer"",""can’t"",""cant"", ""hasn't"",""hasn ’ t"",""it ’ s"",""i ’ be"", ""i ’ have"",""haven ’ t"",""hadn ’ t"",""anyway"",""aren ’ t"",""ûª"",""ûªt"",""ûªve"",""ûªm"",""û"",""ûïmore"",""ûïperiod""))"
"0",""
"0",""
"0","#Removing stop words "
"0","df_token<-df_token %>%"
"0","            anti_join(undersirablewords, by=c(""lemword""=""word""))"
"0",""
"0","df_token<-df_token %>%"
"0","            anti_join(get_stopwords(), by=c(""lemword""=""word""))"
"0",""
"0","#Count"
"0","library(plyr)"
"0","df_token %>%"
"0","  dplyr::count(word, sort = TRUE)"
